{"remainingRequest":"/home/smag/dev/siti/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/smag/dev/siti/src/components/editable/PageTip.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/smag/dev/siti/src/components/editable/PageTip.vue","mtime":1622997786312},{"path":"/home/smag/dev/siti/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/smag/dev/siti/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/smag/dev/siti/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/smag/dev/siti/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGFnZSIsCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICB0eHQ6IGA9PT09PT1Gw6lsaWNpdGF0aW9ucywgdm90cmUgd2lraSBlc3QgaW5zdGFsbMOpICEKCiAgICAgID09PSIiWWVzV2lraSIiIDogdW4gb3V0aWwgY29udml2aWFsIHBvdGVudGllbGxlbWVudCBjb2xsYWJvcmF0aWY9PT0KICAgICAgVm9pY2kgcXVlbHF1ZXMgw6lsw6ltZW50cyBhZmluIGRlIGJpZW4gZMOpbWFycmVyIGRlIHZvdXMgYXBwcm9wcmllciBjZSBub3V2ZWwgb3V0aWwuCiAgICAgIC0gTGUgZG91YmxlLWNsaWMgZXN0IHZvdHJlIGFtaSAhIFNpIHZvdXMgdm91bGV6IG1vZGlmaWVyIHVuZSBwYWdlIGRlIHZvdHJlIFllc3dpa2ksIGRvdWJsZS1jbGlxdWV6IHNpbXBsZW1lbnQgZGVzc3VzIG91IGNsaXF1ZXogc3VyICLDqWRpdGVyIGxhIHBhZ2UiIGVuIGJhcyDDoCBnYXVjaGUKICAgICAgLSBTaSB2b3VzIHZvdWxleiB2b3VzIGV4ZXJjZXIgc2VyZWluZW1lbnQsIHZvdXMgcG91dmV6IGVzc2F5ZXIgZGUgbW9kaWZpZXIgbGEgcGFnZSBbW0JhY0FTYWJsZSBiYWMgw6Agc2FibGVdXS4KICAgICAgLSBWb3VzIHBvdXZleiDDqWdhbGVtZW50IGVzc2F5ZXIgZGUgbW9kaWZpZXIgZGUgbGEgbcOqbWUgbWFuacOocmUgbGEgcGFnZSBzdXIgbGFxdWVsbGUgdm91cyDDqnRlcyBhY3R1ZWxsZW1lbnQuCiAgICAgIC0gVm91cyBzb3VoYWl0ZXogbW9kaWZpZXIgbGUgbWVudSBob3Jpem9udGFsIGfDqW7DqXJhbCA/IERvdWJsZS1jbGlxdWV6IGdhdWNoZSBzdXIgY2UgbWVudSAoZW4gZGVob3JzIGR1IHRleHRlKSwgZXQgdm91cyBhdXJleiBhY2PDqHMgw6AgbCfDqWRpdGlvbiBkZSBjZSBtZW51LiBVdGlsaXNleiBsZXMgdGlyZXRzICgiLSIpIHBvdXIgY3LDqWVyIGRlIG5vdXZlbGxlcyBlbnRyw6llcy4KICAgICAgLSBFdCBpbCB5IGEgdW5lIHBhZ2UgZGUgbGEgZG9jICIiWWVzV2lraSIiIMOgIGxpcmUgYWJzb2x1bWVudCwgY2VsbGUgcXVpIHZvdXMgcGVybWV0IGRlIFtbaHR0cHM6Ly95ZXN3aWtpLm5ldC8/SGlzdG9yaXF1ZVJldmlzaW9ucyByZXN0YXVyZXIgdW5lIHBhZ2UgbW9kaWZpw6llIGVuIGNhcyBkJ2VycmV1ciBvdSBkZSBwcm9ibMOobWVdXS4gQ29tbWUgw6dhLCBhdWN1biByaXNxdWVzICEhIQogICAgICAgIC0gTGUgbWVudSBkJ2FkbWluaXN0cmF0aW9uIGVuIGhhdXQgw6AgZHJvaXRlLCBhY2Nlc3NpYmxlIGRlcHVpcyBsYSByb3VlIGNyYW50w6llIChjbGljIGdhdWNoZSkgdm91cyBwZXJtZXR0cmEgOgogICAgICAgIC0gZGUgW1tXaWtpQWRtaW4gZ8OpcmVyIGxlIHNpdGUgKHBhZ2VzIGltcG9ydGFudGVzLCBjb21wdGVzIGV0IGdyb3VwZXMgdXRpbGlzYXRldXJzLCBldGMuKV1dLAogICAgICAgIC0gZOKAmWFkbWluaXN0cmVyIGxhIFtbQmF6YVIgYmFzZSBkZSBkb25uw6llcyBCYXphcl1dLAogICAgICAgIC0gZGUgY29uc3VsdGVyIGxlcyBbW1RhYmxlYXVEZUJvcmQgZGVybmnDqHJlcyBtb2RpZmljYXRpb25zIHN1ciBsZSB3aWtpXV0uCiAgICAgICAgYCwKICAgICAgICBtZW51VmlzaWJsZTogZmFsc2UsCiAgICAgICAgZWRpdGFibGU6IGZhbHNlLAogICAgICB9CiAgICB9LAogICAgY29tcG9uZW50czogewogICAgICAnQnV0dG9uVG9vbGJhcic6ICgpID0+IGltcG9ydCgnQC9jb21wb25lbnRzL2VkaXRhYmxlL0J1dHRvblRvb2xiYXInKSwKICAgICAgJ0FjdGlvbkxpc3QnOiAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9lZGl0YWJsZS9BY3Rpb25MaXN0JyksCiAgICAgICdUaXB0YXAnOigpID0+IGltcG9ydCAoJ0AvY29tcG9uZW50cy9lZGl0YWJsZS9UaXBUYXAudnVlJykKICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgYWN0aW9uKGEpewogICAgICAgIGNvbnNvbGUubG9nKCJhY3Rpb24iLGEpCiAgICAgICAgc3dpdGNoIChhKSB7CiAgICAgICAgICBjYXNlICJlZGl0IjoKICAgICAgICAgIHRoaXMuZWRpdGFibGUgPSB0cnVlCiAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImRlbGV0ZSI6CgogICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJoaXN0b3J5IjoKCiAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInBlcm1pc3Npb24iOgoKICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAic2hhcmUiOgoKICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKCiAgICAgICAgfQogICAgICB9LAogICAgICB1cGRhdGVQYWdlKCl7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5maWxlKQogICAgICAgIHRoaXMudHh0ID0gdGhpcy5maWxlLmNvbnRlbnQKICAgICAgfSwKICAgICAgZGJsY2xpY2soZSl7CiAgICAgICAgdGhpcy5lZGl0YWJsZSA9IHRydWUKICAgICAgICBjb25zb2xlLmxvZygiZGJsIixlKQogICAgICB9LAogICAgICAvLyBzaG93TWVudSgpewogICAgICAvLyAgIGxldCBvbGQgPSB0aGlzLnR4dAogICAgICAvLyAgIHRoaXMubWVudVZpc2libGUgPSB0cnVlCiAgICAgIC8vICAgY29uc29sZS5sb2coInNob3ciLCBvbGQpCiAgICAgIC8vIH0sCiAgICAgIHNhdXZlKGUpewogICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgICAgdGhpcy5lZGl0YWJsZSA9IGZhbHNlCiAgICAgICAgdmFyIHNyYyA9IHRoaXMuJHJlZnMuZWRpdGFibGVEaXYuaW5uZXJUZXh0CiAgICAgICAgdGhpcy50eHQgPSBzcmMKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnR4dCkKICAgICAgICB0aGlzLmZpbGUuY29udGVudCA9IHRoaXMudHh0CiAgICAgICAgY29uc29sZS5sb2codGhpcy5maWxlKQogICAgICAgIHRoaXMuJHNhdmUodGhpcy5maWxlKQogICAgICB9LAogICAgICBmb3JtYXQoZil7CiAgICAgICAgY29uc29sZS5sb2coZikKICAgICAgICAvL3ZhciB0ZXh0ID0gIiI7CiAgICAgICAgY29uc29sZS5sb2codHlwZW9mIGYpCgogICAgICAgIGxldCBiYWxpc2UgPSAiIgogICAgICAgIGlmKHR5cGVvZiBmID09ICJudW1iZXIiKXsKICAgICAgICAgIC8vICBiYWxpc2UgPSAiPSIucmVwZWF0KDctZikKICAgICAgICAgIGJhbGlzZSA9ICJoIitmCiAgICAgICAgfWVsc2V7CiAgICAgICAgICBjb25zb2xlLmxvZygidG9kbyBmb3JtYXQiLGYpCiAgICAgICAgfQoKCgogICAgICAgIGNvbnNvbGUubG9nKGJhbGlzZSkKICAgICAgICB2YXIgc2VsLCByYW5nZTsKICAgICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikgewogICAgICAgICAgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpOwogICAgICAgICAgbGV0IHR4dCA9IHNlbC50b1N0cmluZygpCiAgICAgICAgICBsZXQgcmVwbGFjZW1lbnRUZXh0ID0gIjwiK2JhbGlzZSsiPiIrdHh0KyI8LyIrYmFsaXNlKyI+IgogICAgICAgICAgaWYgKHNlbC5yYW5nZUNvdW50KSB7CiAgICAgICAgICAgIHJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7CiAgICAgICAgICAgIHJhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7CiAgICAgICAgICAgIHJhbmdlLmluc2VydE5vZGUoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocmVwbGFjZW1lbnRUZXh0KSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24gJiYgZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKSB7CiAgICAgICAgICByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpOwogICAgICAgICAgbGV0IHR4dCA9IHJhbmdlLnR4dAogICAgICAgICAgbGV0IHJlcGxhY2VtZW50VGV4dCA9ICI8IitiYWxpc2UrIj4iK3R4dCsiPC8iK2JhbGlzZSsiPiIKICAgICAgICAgIHJhbmdlLnRleHQgPSByZXBsYWNlbWVudFRleHQ7CiAgICAgICAgfQogICAgICB9LAogICAgICAvLyByZXBsYWNlU2VsZWN0ZWRUZXh0KHJlcGxhY2VtZW50VGV4dCkgewogICAgICAvLyAgIHZhciBzZWwsIHJhbmdlOwogICAgICAvLyAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7CiAgICAgIC8vICAgICBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7CiAgICAgIC8vICAgICBpZiAoc2VsLnJhbmdlQ291bnQpIHsKICAgICAgLy8gICAgICAgcmFuZ2UgPSBzZWwuZ2V0UmFuZ2VBdCgwKTsKICAgICAgLy8gICAgICAgcmFuZ2UuZGVsZXRlQ29udGVudHMoKTsKICAgICAgLy8gICAgICAgcmFuZ2UuaW5zZXJ0Tm9kZShkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShyZXBsYWNlbWVudFRleHQpKTsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UpIHsKICAgICAgLy8gICAgIHJhbmdlID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7CiAgICAgIC8vICAgICByYW5nZS50ZXh0ID0gcmVwbGFjZW1lbnRUZXh0OwogICAgICAvLyAgIH0KICAgICAgLy8KICAgICAgLy8gfQoKICAgIH0sCiAgICB3YXRjaDp7CiAgICAgIGZpbGUoKXsKICAgICAgICB0aGlzLnVwZGF0ZVBhZ2UoKQogICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6ewogICAgICBmaWxlOnsKICAgICAgICBnZXQgKCkgeyByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudmlraS5maWxlfSwKICAgICAgICBzZXQgKC8qdmFsdWUqLykgeyAvKnRoaXMudXBkYXRlVG9kbyh2YWx1ZSkqLyB9CiAgICAgIH0sCiAgICB9CiAgfQogIA=="},{"version":3,"sources":["PageTip.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PageTip.vue","sourceRoot":"src/components/editable","sourcesContent":["<template>\n  <div>\n    <!-- <ButtonToolbar v-if=\"editable\" @sauve=\"sauve\" @format=\"format\" /> -->\n\n    <tiptap v-model=\"txt\" @input=\"sauve\"/>\n\n    <!-- <div\n    ref=\"editableDiv\"\n    v-html=\"txt\"\n    variant = \"sucess\"\n\n    @dblclick=\"dblclick\"\n    :contenteditable=\"editable ? true : false\"\n    >-->\n    <!-- @blur=\"onEdit\" -->\n    <!--  </div>\n    <ActionList @action=\"action\" /> -->\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Page\",\n  data(){\n    return{\n      txt: `======Félicitations, votre wiki est installé !\n\n      ===\"\"YesWiki\"\" : un outil convivial potentiellement collaboratif===\n      Voici quelques éléments afin de bien démarrer de vous approprier ce nouvel outil.\n      - Le double-clic est votre ami ! Si vous voulez modifier une page de votre Yeswiki, double-cliquez simplement dessus ou cliquez sur \"éditer la page\" en bas à gauche\n      - Si vous voulez vous exercer sereinement, vous pouvez essayer de modifier la page [[BacASable bac à sable]].\n      - Vous pouvez également essayer de modifier de la même manière la page sur laquelle vous êtes actuellement.\n      - Vous souhaitez modifier le menu horizontal général ? Double-cliquez gauche sur ce menu (en dehors du texte), et vous aurez accès à l'édition de ce menu. Utilisez les tirets (\"-\") pour créer de nouvelles entrées.\n      - Et il y a une page de la doc \"\"YesWiki\"\" à lire absolument, celle qui vous permet de [[https://yeswiki.net/?HistoriqueRevisions restaurer une page modifiée en cas d'erreur ou de problème]]. Comme ça, aucun risques !!!\n        - Le menu d'administration en haut à droite, accessible depuis la roue crantée (clic gauche) vous permettra :\n        - de [[WikiAdmin gérer le site (pages importantes, comptes et groupes utilisateurs, etc.)]],\n        - d’administrer la [[BazaR base de données Bazar]],\n        - de consulter les [[TableauDeBord dernières modifications sur le wiki]].\n        `,\n        menuVisible: false,\n        editable: false,\n      }\n    },\n    components: {\n      'ButtonToolbar': () => import('@/components/editable/ButtonToolbar'),\n      'ActionList': () => import('@/components/editable/ActionList'),\n      'Tiptap':() => import ('@/components/editable/TipTap.vue')\n    },\n    methods:{\n      action(a){\n        console.log(\"action\",a)\n        switch (a) {\n          case \"edit\":\n          this.editable = true\n          break;\n          case \"delete\":\n\n          break;\n          case \"history\":\n\n          break;\n          case \"permission\":\n\n          break;\n          case \"share\":\n\n          break;\n          default:\n\n        }\n      },\n      updatePage(){\n        console.log(this.file)\n        this.txt = this.file.content\n      },\n      dblclick(e){\n        this.editable = true\n        console.log(\"dbl\",e)\n      },\n      // showMenu(){\n      //   let old = this.txt\n      //   this.menuVisible = true\n      //   console.log(\"show\", old)\n      // },\n      sauve(e){\n        console.log(e)\n        this.editable = false\n        var src = this.$refs.editableDiv.innerText\n        this.txt = src\n        console.log(this.txt)\n        this.file.content = this.txt\n        console.log(this.file)\n        this.$save(this.file)\n      },\n      format(f){\n        console.log(f)\n        //var text = \"\";\n        console.log(typeof f)\n\n        let balise = \"\"\n        if(typeof f == \"number\"){\n          //  balise = \"=\".repeat(7-f)\n          balise = \"h\"+f\n        }else{\n          console.log(\"todo format\",f)\n        }\n\n\n\n        console.log(balise)\n        var sel, range;\n        if (window.getSelection) {\n          sel = window.getSelection();\n          let txt = sel.toString()\n          let replacementText = \"<\"+balise+\">\"+txt+\"</\"+balise+\">\"\n          if (sel.rangeCount) {\n            range = sel.getRangeAt(0);\n            range.deleteContents();\n            range.insertNode(document.createTextNode(replacementText));\n          }\n        } else if (document.selection && document.selection.createRange) {\n          range = document.selection.createRange();\n          let txt = range.txt\n          let replacementText = \"<\"+balise+\">\"+txt+\"</\"+balise+\">\"\n          range.text = replacementText;\n        }\n      },\n      // replaceSelectedText(replacementText) {\n      //   var sel, range;\n      //   if (window.getSelection) {\n      //     sel = window.getSelection();\n      //     if (sel.rangeCount) {\n      //       range = sel.getRangeAt(0);\n      //       range.deleteContents();\n      //       range.insertNode(document.createTextNode(replacementText));\n      //     }\n      //   } else if (document.selection && document.selection.createRange) {\n      //     range = document.selection.createRange();\n      //     range.text = replacementText;\n      //   }\n      //\n      // }\n\n    },\n    watch:{\n      file(){\n        this.updatePage()\n      }\n    },\n    computed:{\n      file:{\n        get () { return this.$store.state.viki.file},\n        set (/*value*/) { /*this.updateTodo(value)*/ }\n      },\n    }\n  }\n  </script>\n\n  <style>\n\n  </style>\n"]}]}