{"remainingRequest":"/home/smag/dev/siti/node_modules/thread-loader/dist/cjs.js!/home/smag/dev/siti/node_modules/babel-loader/lib/index.js!/home/smag/dev/siti/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/smag/dev/siti/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/smag/dev/siti/src/components/editable/Test.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/smag/dev/siti/src/components/editable/Test.vue","mtime":1622987139245},{"path":"/home/smag/dev/siti/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/smag/dev/siti/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/smag/dev/siti/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/smag/dev/siti/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/smag/dev/siti/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL2hvbWUvc21hZy9kZXYvc2l0aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwZWF0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVGVzdCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHR4dDogIj09PT09PUZceEU5bGljaXRhdGlvbnMsIHZvdHJlIHdpa2kgZXN0IGluc3RhbGxceEU5ICFcblxuICAgICAgPT09XCJcIlllc1dpa2lcIlwiIDogdW4gb3V0aWwgY29udml2aWFsIHBvdGVudGllbGxlbWVudCBjb2xsYWJvcmF0aWY9PT1cbiAgICAgIFZvaWNpIHF1ZWxxdWVzIFx4RTlsXHhFOW1lbnRzIGFmaW4gZGUgYmllbiBkXHhFOW1hcnJlciBkZSB2b3VzIGFwcHJvcHJpZXIgY2Ugbm91dmVsIG91dGlsLlxuICAgICAgLSBMZSBkb3VibGUtY2xpYyBlc3Qgdm90cmUgYW1pICEgU2kgdm91cyB2b3VsZXogbW9kaWZpZXIgdW5lIHBhZ2UgZGUgdm90cmUgWWVzd2lraSwgZG91YmxlLWNsaXF1ZXogc2ltcGxlbWVudCBkZXNzdXMgb3UgY2xpcXVleiBzdXIgXCJceEU5ZGl0ZXIgbGEgcGFnZVwiIGVuIGJhcyBceEUwIGdhdWNoZVxuICAgICAgLSBTaSB2b3VzIHZvdWxleiB2b3VzIGV4ZXJjZXIgc2VyZWluZW1lbnQsIHZvdXMgcG91dmV6IGVzc2F5ZXIgZGUgbW9kaWZpZXIgbGEgcGFnZSBbW0JhY0FTYWJsZSBiYWMgXHhFMCBzYWJsZV1dLlxuICAgICAgLSBWb3VzIHBvdXZleiBceEU5Z2FsZW1lbnQgZXNzYXllciBkZSBtb2RpZmllciBkZSBsYSBtXHhFQW1lIG1hbmlceEU4cmUgbGEgcGFnZSBzdXIgbGFxdWVsbGUgdm91cyBceEVBdGVzIGFjdHVlbGxlbWVudC5cbiAgICAgIC0gVm91cyBzb3VoYWl0ZXogbW9kaWZpZXIgbGUgbWVudSBob3Jpem9udGFsIGdceEU5blx4RTlyYWwgPyBEb3VibGUtY2xpcXVleiBnYXVjaGUgc3VyIGNlIG1lbnUgKGVuIGRlaG9ycyBkdSB0ZXh0ZSksIGV0IHZvdXMgYXVyZXogYWNjXHhFOHMgXHhFMCBsJ1x4RTlkaXRpb24gZGUgY2UgbWVudS4gVXRpbGlzZXogbGVzIHRpcmV0cyAoXCItXCIpIHBvdXIgY3JceEU5ZXIgZGUgbm91dmVsbGVzIGVudHJceEU5ZXMuXG4gICAgICAtIEV0IGlsIHkgYSB1bmUgcGFnZSBkZSBsYSBkb2MgXCJcIlllc1dpa2lcIlwiIFx4RTAgbGlyZSBhYnNvbHVtZW50LCBjZWxsZSBxdWkgdm91cyBwZXJtZXQgZGUgW1todHRwczovL3llc3dpa2kubmV0Lz9IaXN0b3JpcXVlUmV2aXNpb25zIHJlc3RhdXJlciB1bmUgcGFnZSBtb2RpZmlceEU5ZSBlbiBjYXMgZCdlcnJldXIgb3UgZGUgcHJvYmxceEU4bWVdXS4gQ29tbWUgXHhFN2EsIGF1Y3VuIHJpc3F1ZXMgISEhXG4gICAgICAgIC0gTGUgbWVudSBkJ2FkbWluaXN0cmF0aW9uIGVuIGhhdXQgXHhFMCBkcm9pdGUsIGFjY2Vzc2libGUgZGVwdWlzIGxhIHJvdWUgY3JhbnRceEU5ZSAoY2xpYyBnYXVjaGUpIHZvdXMgcGVybWV0dHJhIDpcbiAgICAgICAgLSBkZSBbW1dpa2lBZG1pbiBnXHhFOXJlciBsZSBzaXRlIChwYWdlcyBpbXBvcnRhbnRlcywgY29tcHRlcyBldCBncm91cGVzIHV0aWxpc2F0ZXVycywgZXRjLildXSxcbiAgICAgICAgLSBkXHUyMDE5YWRtaW5pc3RyZXIgbGEgW1tCYXphUiBiYXNlIGRlIGRvbm5ceEU5ZXMgQmF6YXJdXSxcbiAgICAgICAgLSBkZSBjb25zdWx0ZXIgbGVzIFtbVGFibGVhdURlQm9yZCBkZXJuaVx4RThyZXMgbW9kaWZpY2F0aW9ucyBzdXIgbGUgd2lraV1dLlxuICAgICAgICAiLAogICAgICBtZW51VmlzaWJsZTogZmFsc2UsCiAgICAgIGVkaXRhYmxlOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgICdCdXR0b25Ub29sYmFyJzogZnVuY3Rpb24gQnV0dG9uVG9vbGJhcigpIHsKICAgICAgcmV0dXJuIGltcG9ydCgnQC9jb21wb25lbnRzL2VkaXRhYmxlL0J1dHRvblRvb2xiYXInKTsKICAgIH0sCiAgICAnQWN0aW9uTGlzdCc6IGZ1bmN0aW9uIEFjdGlvbkxpc3QoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoJ0AvY29tcG9uZW50cy9lZGl0YWJsZS9BY3Rpb25MaXN0Jyk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBkYmxjbGljazogZnVuY3Rpb24gZGJsY2xpY2soZSkgewogICAgICB0aGlzLmVkaXRhYmxlID0gdHJ1ZTsKICAgICAgY29uc29sZS5sb2coImRibCIsIGUpOwogICAgfSwKICAgIC8vIHNob3dNZW51KCl7CiAgICAvLyAgIGxldCBvbGQgPSB0aGlzLnR4dAogICAgLy8gICB0aGlzLm1lbnVWaXNpYmxlID0gdHJ1ZQogICAgLy8gICBjb25zb2xlLmxvZygic2hvdyIsIG9sZCkKICAgIC8vIH0sCiAgICBzYXV2ZTogZnVuY3Rpb24gc2F1dmUoZSkgewogICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgdGhpcy5lZGl0YWJsZSA9IGZhbHNlOwogICAgICB2YXIgc3JjID0gdGhpcy4kcmVmcy5lZGl0YWJsZURpdi5pbm5lclRleHQ7CiAgICAgIHRoaXMudHh0ID0gc3JjOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnR4dCk7CiAgICB9LAogICAgZm9ybWF0OiBmdW5jdGlvbiBmb3JtYXQoZikgewogICAgICBjb25zb2xlLmxvZyhmKTsgLy92YXIgdGV4dCA9ICIiOwoKICAgICAgY29uc29sZS5sb2coX3R5cGVvZihmKSk7CiAgICAgIHZhciBiYWxpc2UgPSAiIjsKCiAgICAgIGlmICh0eXBlb2YgZiA9PSAibnVtYmVyIikgewogICAgICAgIGJhbGlzZSA9ICI9Ii5yZXBlYXQoNyAtIGYpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCJ0b2RvIGZvcm1hdCIsIGYpOwogICAgICB9CgogICAgICBjb25zb2xlLmxvZyhiYWxpc2UpOwogICAgICB2YXIgc2VsLCByYW5nZTsKCiAgICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7CiAgICAgICAgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpOwogICAgICAgIHZhciB0eHQgPSBzZWwudG9TdHJpbmcoKTsKICAgICAgICB2YXIgcmVwbGFjZW1lbnRUZXh0ID0gYmFsaXNlICsgdHh0ICsgYmFsaXNlOwoKICAgICAgICBpZiAoc2VsLnJhbmdlQ291bnQpIHsKICAgICAgICAgIHJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7CiAgICAgICAgICByYW5nZS5kZWxldGVDb250ZW50cygpOwogICAgICAgICAgcmFuZ2UuaW5zZXJ0Tm9kZShkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShyZXBsYWNlbWVudFRleHQpKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uICYmIGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSkgewogICAgICAgIHJhbmdlID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgdmFyIF90eHQgPSByYW5nZS50eHQ7CgogICAgICAgIHZhciBfcmVwbGFjZW1lbnRUZXh0ID0gYmFsaXNlICsgX3R4dCArIGJhbGlzZTsKCiAgICAgICAgcmFuZ2UudGV4dCA9IF9yZXBsYWNlbWVudFRleHQ7CiAgICAgIH0KICAgIH0gLy8gcmVwbGFjZVNlbGVjdGVkVGV4dChyZXBsYWNlbWVudFRleHQpIHsKICAgIC8vICAgdmFyIHNlbCwgcmFuZ2U7CiAgICAvLyAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7CiAgICAvLyAgICAgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpOwogICAgLy8gICAgIGlmIChzZWwucmFuZ2VDb3VudCkgewogICAgLy8gICAgICAgcmFuZ2UgPSBzZWwuZ2V0UmFuZ2VBdCgwKTsKICAgIC8vICAgICAgIHJhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7CiAgICAvLyAgICAgICByYW5nZS5pbnNlcnROb2RlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJlcGxhY2VtZW50VGV4dCkpOwogICAgLy8gICAgIH0KICAgIC8vICAgfSBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24gJiYgZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKSB7CiAgICAvLyAgICAgcmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTsKICAgIC8vICAgICByYW5nZS50ZXh0ID0gcmVwbGFjZW1lbnRUZXh0OwogICAgLy8gICB9CiAgICAvLwogICAgLy8gfQoKICB9Cn07"},{"version":3,"sources":["Test.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAiBA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,GAAA,wgDADA;AAeA,MAAA,WAAA,EAAA,KAfA;AAgBA,MAAA,QAAA,EAAA;AAhBA,KAAA;AAkBA,GArBA;AAsBA,EAAA,UAAA,EAAA;AACA,qBAAA;AAAA,aAAA,OAAA,qCAAA,CAAA;AAAA,KADA;AAEA,kBAAA;AAAA,aAAA,OAAA,kCAAA,CAAA;AAAA;AAFA,GAtBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,CADA,EACA;AACA,WAAA,QAAA,GAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,EAAA,CAAA;AACA,KAJA;AAKA;AACA;AACA;AACA;AACA;AACA,IAAA,KAVA,iBAUA,CAVA,EAUA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,WAAA,QAAA,GAAA,KAAA;AACA,UAAA,GAAA,GAAA,KAAA,KAAA,CAAA,WAAA,CAAA,SAAA;AACA,WAAA,GAAA,GAAA,GAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,GAAA;AACA,KAhBA;AAiBA,IAAA,MAjBA,kBAiBA,CAjBA,EAiBA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,CAAA,EADA,CAEA;;AACA,MAAA,OAAA,CAAA,GAAA,SAAA,CAAA;AAEA,UAAA,MAAA,GAAA,EAAA;;AACA,UAAA,OAAA,CAAA,IAAA,QAAA,EAAA;AACA,QAAA,MAAA,GAAA,IAAA,MAAA,CAAA,IAAA,CAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,aAAA,EAAA,CAAA;AACA;;AAIA,MAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,UAAA,GAAA,EAAA,KAAA;;AACA,UAAA,MAAA,CAAA,YAAA,EAAA;AACA,QAAA,GAAA,GAAA,MAAA,CAAA,YAAA,EAAA;AACA,YAAA,GAAA,GAAA,GAAA,CAAA,QAAA,EAAA;AACA,YAAA,eAAA,GAAA,MAAA,GAAA,GAAA,GAAA,MAAA;;AACA,YAAA,GAAA,CAAA,UAAA,EAAA;AACA,UAAA,KAAA,GAAA,GAAA,CAAA,UAAA,CAAA,CAAA,CAAA;AACA,UAAA,KAAA,CAAA,cAAA;AACA,UAAA,KAAA,CAAA,UAAA,CAAA,QAAA,CAAA,cAAA,CAAA,eAAA,CAAA;AACA;AACA,OATA,MASA,IAAA,QAAA,CAAA,SAAA,IAAA,QAAA,CAAA,SAAA,CAAA,WAAA,EAAA;AACA,QAAA,KAAA,GAAA,QAAA,CAAA,SAAA,CAAA,WAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,CAAA,GAAA;;AACA,YAAA,gBAAA,GAAA,MAAA,GAAA,IAAA,GAAA,MAAA;;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,gBAAA;AACA;AACA,KAhDA,CAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA/DA;AA1BA,CAAA","sourcesContent":["<template>\n  <div>\n    <ButtonToolbar v-if=\"editable\" @sauve=\"sauve\" @format=\"format\" />\n    <div\n    ref=\"editableDiv\"\n    v-text=\"txt\"\n\n    @dblclick=\"dblclick\"\n    :contenteditable=\"editable ? true : false\"\n    >\n    <!-- @blur=\"onEdit\" -->\n  </div>\n  <ActionList />\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"Test\",\n  data(){\n    return{\n      txt: `======Félicitations, votre wiki est installé !\n\n      ===\"\"YesWiki\"\" : un outil convivial potentiellement collaboratif===\n      Voici quelques éléments afin de bien démarrer de vous approprier ce nouvel outil.\n      - Le double-clic est votre ami ! Si vous voulez modifier une page de votre Yeswiki, double-cliquez simplement dessus ou cliquez sur \"éditer la page\" en bas à gauche\n      - Si vous voulez vous exercer sereinement, vous pouvez essayer de modifier la page [[BacASable bac à sable]].\n      - Vous pouvez également essayer de modifier de la même manière la page sur laquelle vous êtes actuellement.\n      - Vous souhaitez modifier le menu horizontal général ? Double-cliquez gauche sur ce menu (en dehors du texte), et vous aurez accès à l'édition de ce menu. Utilisez les tirets (\"-\") pour créer de nouvelles entrées.\n      - Et il y a une page de la doc \"\"YesWiki\"\" à lire absolument, celle qui vous permet de [[https://yeswiki.net/?HistoriqueRevisions restaurer une page modifiée en cas d'erreur ou de problème]]. Comme ça, aucun risques !!!\n        - Le menu d'administration en haut à droite, accessible depuis la roue crantée (clic gauche) vous permettra :\n        - de [[WikiAdmin gérer le site (pages importantes, comptes et groupes utilisateurs, etc.)]],\n        - d’administrer la [[BazaR base de données Bazar]],\n        - de consulter les [[TableauDeBord dernières modifications sur le wiki]].\n        `,\n        menuVisible: false,\n        editable: false,\n      }\n    },\n    components: {\n      'ButtonToolbar': () => import('@/components/editable/ButtonToolbar'),\n      'ActionList': () => import('@/components/editable/ActionList'),\n    },\n    methods:{\n      dblclick(e){\n        this.editable = true\n        console.log(\"dbl\",e)\n      },\n      // showMenu(){\n      //   let old = this.txt\n      //   this.menuVisible = true\n      //   console.log(\"show\", old)\n      // },\n      sauve(e){\n        console.log(e)\n        this.editable = false\n        var src = this.$refs.editableDiv.innerText\n        this.txt = src\n        console.log(this.txt)\n      },\n      format(f){\n        console.log(f)\n        //var text = \"\";\n        console.log(typeof f)\n\n        let balise = \"\"\n        if(typeof f == \"number\"){\n          balise = \"=\".repeat(7-f)\n        }else{\n          console.log(\"todo format\",f)\n        }\n\n\n\n        console.log(balise)\n        var sel, range;\n        if (window.getSelection) {\n          sel = window.getSelection();\n          let txt = sel.toString()\n          let replacementText = balise+txt+balise\n          if (sel.rangeCount) {\n            range = sel.getRangeAt(0);\n            range.deleteContents();\n            range.insertNode(document.createTextNode(replacementText));\n          }\n        } else if (document.selection && document.selection.createRange) {\n          range = document.selection.createRange();\n          let txt = range.txt\n          let replacementText = balise+txt+balise\n          range.text = replacementText;\n        }\n      },\n      // replaceSelectedText(replacementText) {\n      //   var sel, range;\n      //   if (window.getSelection) {\n      //     sel = window.getSelection();\n      //     if (sel.rangeCount) {\n      //       range = sel.getRangeAt(0);\n      //       range.deleteContents();\n      //       range.insertNode(document.createTextNode(replacementText));\n      //     }\n      //   } else if (document.selection && document.selection.createRange) {\n      //     range = document.selection.createRange();\n      //     range.text = replacementText;\n      //   }\n      //\n      // }\n\n    }\n  }\n  </script>\n\n  <style>\n\n  </style>\n"],"sourceRoot":"src/components/editable"}]}